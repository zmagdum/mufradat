version: "3.8"

services:
localstack:
image: localstack/localstack:4.11.0
container_name: localstack
ports:
- "4566:4566"
- "4510-4559:4510-4559"
environment:
- SERVICES=lambda,apigateway,cloudformation,cloudwatch,logs,iam,s3,ssm,sts
- DEBUG=1
- LAMBDA_EXECUTOR=docker
- LAMBDA_REMOTE_DOCKER=false
- PERSISTENCE=1
- AWS_DEFAULT_REGION=us-east-1
- HOSTNAME_EXTERNAL=localhost
volumes:
- /var/run/docker.sock:/var/run/docker.sock
- ./localstack-data:/var/lib/localstack